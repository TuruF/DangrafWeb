<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Nóminas - Escuela Infantil</title>
  <!-- jsPDF y autoTable -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
<!-- SheetJS para exportar Excel -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <style>
    body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  background-color: #f3f3f3;
}

header {
  background-color: #3f51b5;
  color: white;
  padding: 1rem;
  text-align: center;
}

main {
  padding: 2rem;
  max-width: 800px;
  margin: auto;
  background-color: white;
  border-radius: 8px;
}

form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 2rem;
}

label {
  display: flex;
  flex-direction: column;
  font-weight: bold;
}

input {
  padding: 0.5rem;
  margin-top: 0.2rem;
  border-radius: 4px;
  border: 1px solid #ccc;
}

button {
  background-color: #3f51b5;
  color: white;
  border: none;
  padding: 0.8rem;
  border-radius: 5px;
  cursor: pointer;
}

button:hover {
  background-color: #303f9f;
}

.export-buttons {
  display: flex;
  gap: 1rem;
  margin-bottom: 2rem;
}


table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  text-align: center;
  border: 1px solid #ddd;
  padding: 0.5rem;
}

  </style>
</head>
<body>
  <header>
    <h1>Gestión de Nóminas</h1>
  </header>

  <main>
    <section class="form-section">
      <h2>Crear Nueva Nómina</h2>
      <form id="nominaForm">
        <label>Nombre del empleado:
          <input type="text" id="nombre" required>
        </label>
        <label>Salario base (€):
          <input type="number" id="salario" required>
        </label>
        <label>Horas extras (€):
          <input type="number" id="extras" value="0">
        </label>
        <label>Deducciones (€):
          <input type="number" id="deducciones" value="0">
        </label>
        <button type="submit">Generar Nómina</button>
      </form>
    </section>
<div class="export-buttons">
  <button onclick="exportarPDF()">Exportar a PDF</button>
  <button onclick="exportarExcel()">Exportar a Excel</button>
</div>

    <section class="tabla-section">
      <h2>Nóminas Generadas</h2>
      <table id="tablaNominas">
        <thead>
          <tr>
            <th>Empleado</th>
            <th>Salario Base</th>
            <th>Extras</th>
            <th>Deducciones</th>
            <th>Total Neto</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

  <script>
    document.getElementById("nominaForm").addEventListener("submit", function(e) {
  e.preventDefault();

  const nombre = document.getElementById("nombre").value;
  const salario = parseFloat(document.getElementById("salario").value);
  const extras = parseFloat(document.getElementById("extras").value);
  const deducciones = parseFloat(document.getElementById("deducciones").value);

  const totalNeto = salario + extras - deducciones;

  const nuevaFila = document.createElement("tr");
  nuevaFila.innerHTML = `
    <td>${nombre}</td>
    <td>${salario.toFixed(2)} €</td>
    <td>${extras.toFixed(2)} €</td>
    <td>${deducciones.toFixed(2)} €</td>
    <td><strong>${totalNeto.toFixed(2)} €</strong></td>
  `;

  document.querySelector("#tablaNominas tbody").appendChild(nuevaFila);

  // Limpiar formulario
  this.reset();

});
// Exportar a PDF
function exportarPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  doc.text("Nóminas Generadas", 14, 10);

  const tabla = document.querySelector("#tablaNominas");
  const datos = [];

  for (let fila of tabla.rows) {
    const filaDatos = [];
    for (let celda of fila.cells) {
      filaDatos.push(celda.innerText);
    }
    datos.push(filaDatos);
  }

  doc.autoTable({
    head: [datos[0]],
    body: datos.slice(1),
    startY: 20,
  });

  doc.save("nominas.pdf");
}

// Exportar a Excel
function exportarExcel() {
  const tabla = document.getElementById("tablaNominas");
  const wb = XLSX.utils.book_new();
  const ws = XLSX.utils.table_to_sheet(tabla);
  XLSX.utils.book_append_sheet(wb, ws, "Nóminas");
  XLSX.writeFile(wb, "nominas.xlsx");
}

  </script>
</body>
</html>
